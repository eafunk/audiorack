<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>AudioRack 4.0.1</title>
<link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
</head>
<body>
	<script src="index.js"></script>
	<div class="container">
		<div class="wrapper">
			<div id="custQueryDialog" class="modal">
				<form id="custDiaForm">
					<div id="custQueryDiv"></div>
				</form><br>
				<button id="custdialCanc" onclick="custQueryDialogCanc(event)">Cancel</button>
				<button id="custdialOK" onclick="custQueryDialogOK(event)">OK</button>
			</div>
			<div class="panel" id="infopane">
				<button style="float:right;" onclick="closeInfo(event)">&gt;</button>
				<div id="infodata" class="scroll" style="text-align: left;">
					<p>Info Panel</p>
				</div>
			</div>
			<div id="navtab" class="navtab">
				<button id="navabout" class="tabitem" onclick="showTab(event, 'about')">About</button>
			</div>
			<button id="showinfobtn" onclick="showInfo(event)">&lt;</button>
			<div id="about" class="tabcontent">
				<h2>Welcome to AudioRack v4.0.1</h2>
				<p>Copyright &copy2021-2023; Ethan Funk</p>
				<p>Radio is fun...</p>
			</div>
			<div id="stash" class="tabcontent">
				<h2>Local Stash</h2>
				<span style='float: left;'>Total/Selected Duration:</span><span id='stashdur' style='float: right;'></span><div style='clear:both;'></div><p>
				<button onclick="stashSelectAll(event)">Selected all</button>
				<button onclick="stashUnselectAll(event)">Unselect all</button><br>
				<ul class="ddlist" id="stashlist" style="float: left;">
				</ul>
				<div style="padding: 5px;"><button onclick="stashDeleteSelected(event)">Delete selected</button></div>
				<br>
			</div>
			<div id="files" class="tabcontent">
				<div class="scroll">
					<h2>Temporary Files</h2>
					<div class="boxed">
						<h3>Upload Files to Temporary Media Directory</h3>
						<form id="uploadform" enctype="multipart/form-data">
							<input type="file" name="filestoupload" multiple>
							<button id="uploadbut" name="submit" onclick="uploadFiles(event)">Upload</button>
						</form>
						.zip files will be expanded after upload, including any subdirectories.
					</div>
					<div class="boxed">
						<h3>Temporary Media Directory File Listing</h3>
						<div id="filefolder" style="text-align: left">
						</div>
						<div id="filelist" class="scroll">
						</div>
						<button id="filestashbut" name="submit" onclick="filesToStash(event)">Copy selected file(s) to Stash</button>
					</div>
					<div id="fileimportbox" class="boxed">
						<h3>Import Selected File(s) into Library</h3>
						<form id="importform">
							Add imported items to Category:
							<div class="dropdown">
								<button class="editbutton" onclick="clearCatSelect(event)">Clear</button>
								<button id="fileImportCatBtn" class="editbutton" data-id="0" onclick="toggleShowSearchList(event)">[None]</button>
								<div class="search-list-right">
									<button class="editbutton" onclick="refreshFileImportCats(event)">Refresh List</button><br>
									<input id="fileImportCatText" type="text" onkeyup="filterSearchList(event)" placeholder="Enter Search..."></input>
									<div id="fileImportCatList"></div>
								</div>
							</div>
							<label for="impMediaDestList">Media Location:</label>
							<select id="impMediaDestList" name="mdir">
								<option value="" onClick="getMediaLocs()">Reload List</option>
								<option value="" selected>Default</option>
							</select>
							<div class="boxed">
								Handle duplicate items that are found to already be in the library (via file hash):
								<ul style="list-style-type:none; text-align: left">
								<li><input type="radio" name="dup" value="skip" checked="checked">skip
								<li><input type="radio" name="dup" value="catset">Add to category only
								<li><input type="radio" name="dup" value="catset">Replace with selected file (delete old file)
								<li><input type="radio" name="dup" value="update">Update to selected file (if old is missing)
								</ul>
							</div>
						</form>
						<button id="importbut" name="submit" onclick="importSelectFiles(event)">Import</button>
					</div>
				</div>
			</div>
			<div id="login" class="tabcontent">
				<h2>AudioRack User Login</h2>
				<form onsubmit="loginSubmit(event)">
					<center>
					<ul style="list-style-type:none">
						<li><input type="text" name="username" placeholder="Username" required></li>
						<li><input type="password" name="password" placeholder="Password" required></li>
						<li><input type="submit" value="Login"></li>
					</ul>
					</center>
				</form>
			</div>
			<div id="browse" class="tabcontent">
				<h2>Browse Library</h2>
				<label for="bmatch" style="float: left" >Contains:
					<input type="search" id="bmatch" name="match" onchange="browseQuery(event)" placeholder="Enter Text..."> 
				</label>
				<div id="brefine">
				
				</div>
				<div id="browsres">
					<div id="btype" class="scroll">
						
					</div>
					<div id="bres" class="scroll">
						
					</div>
				</div>
			</div>
			<div id="schedule" class="tabcontent">
				<h2>Schedule</h2>
				<div>
					<button class="editbutton" onclick="loadSchedule()">Reload</button>
					Date: <input type='date' id='scheddatesel' name='scheddate' value='' onchange='loadSchedule()'></input>
					<div id="schedkey" class="boxed">
					</div>
				</div>
				<div id="scheddiv" class="scroll">
				</div>
			</div>
			<div id="logs" class="tabcontent">
				<h2>Logs</h2>
				<div>
					Date: <input type='date' id='logdatesel' name='logdate' value='' onchange='loadLogs()'></input><button class="editbutton" onclick="logNowBtn()">Now</button>
				</div>
				<div class="boxed">
					Show Additional Properties
					<input type="checkbox" id="logowner" name="owner" onchange="loadLogs()">Item Owner
					<input type="checkbox" id="logsource" name="source" onchange="loadLogs()">Item Source (URL)
					<input type="checkbox" id="logids" name="ids" onchange="loadLogs()">Various library IDs
				</div>
				<div>
					<button onclick="selectAllLogs(event)">Select All</button>
					<button onclick="unselectAllLogs(event)">Unselect All</button><br>
					<button id="logtostashbtn" onclick="logsToStash(event)">Copy selected to Stash</button></div>
				<div id="logres" class="scroll">
					Please select a Library Location for which to get the logs.
				</div>
			</div>
			<div id="query" class="tabcontent">
				<h2>Custom Queries</h2>
				<table>
					<tr>
						<td>
							<div id="queryList" class="scroll" style="height: 180px;">
								No Saved Queries
							</div>
							<button onclick="queryNew(event)">New</button>
						</td>
						<td>
							<div id="queryInfo">
								<input id="queryName" type="text" size="20" value="">
								<button onclick="queryDelete(event)">Delete</button>
								<button onclick="querySave(event)">Save</button><br>
								<textarea id="querySQL" rows="12" cols="40"></textarea><br>
								<button onclick="queryRun(event)">Run Query</button>
							</div>
						</td>
					</tr>
				</table>
				<div id="queryResult" class="scroll">
				</div>
				<div style="padding: 5px;"><button onclick="exportTableToCSV(event, 'CustomQueryResult.csv')">download CSV</button></div>
			</div>
			<div id="libmanage" class="tabcontent">
				<h2>Manage Database</h2>
				<div class="scroll">
					<div id="dbinit" class="boxed">
						<h3>Initialize/Update Library Database</h3>
						<form id="dbiform">
						<input type="radio" name="dbiprop" value="conf" checked="checked"> Current Library (from settings) -or- 
						<input type="radio" name="dbiprop" value="other"> Specify a library (below):<br>
						<ul style="list-style-type:none">
							<li>MySQL Host: <input type="text" name="host" value=""></li>
							<li>Port: <input type="text" name="port" value="" size="5"></li>
							<li>Username: <input type="text" name="user" value=""></li>
							<li>Password: <input type="text" name="password" value=""></li>
							<li>Database: <input type="text" name="database" value=""></li>
							<li>Table Name Prefix: <input type="text" name="prefix" value="ar_" size="5"></li>
						</ul>
						<div align="left"><button id="dbibutton" name="submit" onclick="clickDbInit(event)">Execute</button> last result: <div id="dbimsg" style="display: inline"></div></div>
						</form>
					</div>
					<div id="locman" class="boxed">
						<h3>Manage Locations</h3>
						<div id="manloctbl" class="scroll">
							
						</div>
					</div>
					<div id="dbsyncdiv" class="boxed">
						<h3>Syncronize Database - Check for restored files after storage recovery.</h3>
						<input type="checkbox" id="syncmark" name="mark"> Mark files as missing.  Otherwise, it's up to the studios to mark missing files.<br>
						<div align="left"><button id="syncbutton" onclick="clickDbSync(event)">Start</button> status: <div id="syncmsg" style="display: inline">Stopped.</div></div>
					</div>
					<div id="dbcrawldiv" class="boxed">
						<h3>Crawl File System - Locate moved/renamed files.</h3>
						<form id="crawlform">
						Pace: <input type="text" name="pace" value="1.0" size="3"> seconds per file checked.<br>
						<input type="checkbox" id="addnewcrawl" name="add" value="1"> Add audio file found not currently in library<br>
						<input type="radio" name="crawlprop" value="conf" checked="checked"> Media Files Directory (from settings) -or- 
						<input type="radio" name="crawlprop" value="other"> Specify directory:<input type="text" name="path" value="">
						<div align="left"><button id="crawlbutton" name="submit" onclick="clickDbCrawl(event)">Start</button> status: <div id="crawlmsg" style="display: inline">Stopped.</div></div>
						</form>
					</div>
				</div>
			</div>
			<div id="studio" class="tabcontent">
				<h2>Studio</h2>
				<button onclick="debugNow(event)">Debug</button>
				<div id="studiodiv" class="scroll">
					<div id="studiogrid" class="stGrid">
						<div id="studioStat" class="stStatus">
							<div id="studioAuto" style="width: 250px; float: left;">
								<fieldset>
									<legend>Automation Mode</legend>
									<ul style="list-style-type:none; text-align: left">
									<li><input type="radio" id="stAuto" name="stQAutoMode" value="Auto" onclick="studioAutoMode(event, 'on')"><label for="stAuto">Auto</label>
									<li><input type="radio" id="stLive" name="stQAutoMode" value="Live" onclick="studioAutoMode(event, 'live')"><label for="stLive">Live</label>
									<li><input type="radio" id="stOff" name="stQAutoMode" value="Off" onclick="studioAutoMode(event, 'off')" checked><label for="stOff">Off</label>
									</ul>
								</fieldset>
								<div id="stFillDesc"></div>
							</div>
							<div id="studioTime" style="float: right;">
								<div id="stQNext">0:00</div>
								<div id="stQDur" style="padding: 10px;">0:00</div>
								<input type="checkbox" id="stRun" onclick="studioRunStop(event);"; ></label for="stRun">Queue Run</label>
								<button onclick="studioSegNow(event)">SegNow</button>
							</div>
						</div>
						<div id="studioQueue" class="stQueue">
							<div>
								<fieldset>
									<button onclick="queueSelectAll(event)">Select All</button>
									<button onclick="queueUnselectAll(event)">Unselect all</button>
									<div style="float: right;">
										<label for="qHistCount">History Count</label>
										<input type="number" min="2" max="12" name="hCnt" value="8" id="qHistCount" onchange="syncRecentPlays(event);"></input>
									</div>
								</fieldset>
							</div>
							<div>
								<div style="float: left; width: 50;">
									<fieldset>
										Selected Items<br>
										<button onclick="queueDeleteSel(event)">Delete</button>
										<button onclick="queueSelToStash(event)">Copy to Statsh</button>
									</fieldset>
								</div>
								<div style="float: right;">
									<fieldset>
										Insert before first selected, or end<br>
										<button onclick="breakToQueue(event)">Break</button>
										<button onclick="stashToQueue(event)">from Stash</button>
										<button onclick="filesToQueue(event)">from Temp. Files</button>
									</fieldset>
								</div>
							</div>
							<div style="overflow-y: scroll;">
								<ul class="ddlist" id="stHlist">
								</ul>
								<ul class="ddlist" id="stQlist">
								</ul>
							</div>
						</div>
						<div id="studioOuts" class="stOuts">
							<div id="studioOutsVU"></div>
							<div style="overflow: auto;">
								<ul class="ddlist" id="studioOutList">
								</ul>
							</div>
							<div style="width: 55px;">
								<button class="stTbBtn" ontouchstart="stTBAction(event, true, 0);" onmousedown="stTBAction(event, true, 0);"
										onmouseup="stTBAction(event, false, 0);" ontouchend="stTBAction(event,false, 0);">TB1</button>
								<button class="stTbBtn" ontouchstart="stTBAction(event, true, 1);" onmousedown="stTBAction(event, true, 1);"
										onmouseup="stTBAction(event, false, 1);" ontouchend="stTBAction(event, false, 1);">TB2</button>
								<button class="stTbBtn" ontouchstart="stTBAction(event, true, 2);" onmousedown="stTBAction(event, true, 2);"
										onmouseup="stTBAction(event, false, 2);" ontouchend="stTBAction(event, false, 2);">TB3</button>
							</div>
						</div>
						<div id="studioIns" class="stIns">
							<div id="mixergrid" class="mixer"></div>
						</div>
						<div id="studioSide" class="stSide">
							<div class="scroll">
								<button class="accordion" onclick="clickAccordType(event, reloadStudioSection, 'ins')">Live Inputs</button>
								<div class="accpanel">
									<ul class="ddlist" id="stInGrpList" style="float: left;">
									</ul>
								</div>
								<button class="accordion" onclick="clickAccordType(event, reloadStudioSection, 'recorders')">Recorders</button>
								<div class="accpanel">
									<ul class="ddlist" id="stRecorderList">
									</ul>
								</div>
								<button class="accordion" onclick="clickAccordType(event, reloadStudioSection, 'delay')">Delay</button>
								<div class="accpanel">
								</div>
								<button class="accordion" onclick="clickAccordType(event, reloadStudioSection, 'wall')">Wall</button>
								<div class="accpanel">
								</div>
								<button class="accordion" onclick="clickAccordType(event, reloadStudioSection, 'control')">Control Surface</button>
								<div class="accpanel">
									<label for="ctlsurf">Control Surfaces</label>
									<select id="ctlsurf" onchange="stContSurfChange(event)">
										<option val="" selected>NONE</option>
									</select>
								</div>
							</div>
						</div>

						<div id="studioAdmin" class="stAdmin">

						</div>
					</div>
				</div>
			</div>
			<div id="configure" class="tabcontent">
				<h2>UI Configuration</h2>
				<div class="scroll">
					<button class="accordion" onclick="clickAccordType(event, reloadConfSection, 'users')">User Settings</button>
					<div class="accpanel">
					</div>
					<button class="accordion" onclick="clickAccordType(event, reloadConfSection, 'http')">HTTP Settings</button>
					<div class="accpanel">
					</div>
					<button class="accordion" onclick="clickAccordType(event, reloadConfSection, 'files')">File Settings</button>
					<div class="accpanel">
					</div>
					<button class="accordion" onclick="clickAccordType(event, reloadConfSection, 'library')">Library Settings</button>
					<div class="accpanel">
					</div>
					<button class="accordion" onclick="clickAccordType(event, reloadConfSection, 'studios')">Studio Settings</button>
					<div class="accpanel">
					</div>
				</div>
			</div>
			<div id="cust" class="tabcontent">
				<h2>Ad Customers</h2>
				<p>Radio is fun...</p>
			</div>
			<div id="campaign" class="tabcontent">
				<h2>Ad Campaigns</h2>
				<p>Radio is fun...</p>
			</div>
			<div id="invoice" class="tabcontent">
				<h2>Ad Invoices</h2>
				<p>Radio is fun...</p>
			</div>
			<div id="trafsched" class="tabcontent">
				<h2>Ad Schedule</h2>
				<p>Radio is fun...</p>
			</div>
			<div id="trafdp" class="tabcontent">
				<h2>Ad Dayparts</h2>
				<p>Radio is fun...</p>
			</div>
		</div>
	</div>
	
	<datalist id="baltick">
		<option value="-1"></option>
		<option value="0"></option>
		<option value="1"></option>
	</datalist>
	
	<template class="player" id="playerTemplate" style="display: none;">
		<div style="display: flex; justify-content: space-between; padding: 2px;">
			<div style="width: 17px;">
				<button id="pUnload" style="height: 13px; width: 13px; font-size: 8px;" onclick="playerAction('unload', event);">x</button>
			</div>
			<div id ="pLabel" style="width: 8px;"></div>
			<div id ="pType">Type</div>
			<button style="height: 13px; width: 13px; font-size: 8px;" onclick="playerItemInfo(event);">i</button>
		</div>
		<div id ="pName" style="width: 72px; display:inline-block; padding: 2px; overflow: hidden; text-overflow: ellipsis;"></div>
		<div>
			<div id="pTime" style="font-size: 12px;">0:00</div>
			<div id="pRem" style="font-size: 12px;"></div>
		</div>
		<div>
			<input id="pPos" type="range" min="-1" max="1" value="0" step="0.05" style=" width: 50px; height: 12px;"
				oninput="playerPosAction(this);" onchange="this.value='0.0';" ondragstart="event.preventDefault(); event.stopPropagation();" draggable="true">
			</input>
		</div>
		<div>
			<button id="pBusSel" class="editbutton" onclick="dropClick(event)" data-showcb="genPlayerBusMenu" data-childdiv="pBusList" style="height: 15px;">
				<i class="fa fa-caret-down"></i>Busses
			</button>
			<div id="pBusList" class="bus-list"></div>
		</div>
		<div>
			<button id="pCue" style="height: 15px; width: 32px; font-size: 8px;" onclick="playerCueAction(event);">Cue</button>
		</div>
		<div>
			L<input id="pBal" type="range" min="-1" max="1" value="0" step="0.05" style=" width: 42px; height: 12px;" 
				oninput="playerBalanceAction(this);" ontouchstart="this.touching = true;" onmousedown="this.touching = true;" 
					onmouseup="this.touching = false;" ontouchend="this.touching = false;" ondragstart="event.preventDefault(); event.stopPropagation();" 
					draggable="true" list="baltick"></input>R
		</div>
		<div style="display: flex; justify-content: space-around;">
			<div>
				<br>
				<div id="pGain" style="width:30px">0 dB</div>
				<div id="pVU"></div>
			</div>
			<div class="player-fader">
				<input id="pFader" type="range" min="0.0" max="1.5" value="1.0" step="0.01" 
					oninput="playerFaderAction(this);" ontouchstart="this.touching = true;" onmousedown="this.touching = true;" 
					onmouseup="this.touching = false;" ontouchend="this.touching = false;" ondragstart="event.preventDefault(); event.stopPropagation();"
					draggable="true"></input>
			</div>
		</div>
		<div style="padding: 2px;">
			<button class="playerStopBtn" id="pPlay" style="float: left;"><i class="fa fa-play" aria-hidden="true" onclick="playerAction('play', event);"></i></button>
			<button class="playerStopBtn" id="pStop" style="float: right;"><i class="fa fa-stop" aria-hidden="true" onclick="playerAction('stop', event);"></i></button>
		</div>
	</template>

</body>
</html>
