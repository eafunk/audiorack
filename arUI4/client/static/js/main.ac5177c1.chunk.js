(this["webpackJsonparui-client"]=this["webpackJsonparui-client"]||[]).push([[0],{367:function(e,t,r){},508:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(15),s=r.n(i),c=(r(367),r(9)),o=r(117).a.fetchJson,l="",u={locName:"",delParams:{},getList:function(e,t){var r={},n=e.split("/");if("config"==n[0])n[0]="getconf";else{if(!n[1]||"library"!=n[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));"browse"==n[1]?r={type:"artist"}:"logs"==n[1]||"sched"==n[1]?t.location=u.locName:n[0]="library/get"}if(t.filter){if(t.filter.q){var a="%"+t.filter.q+"%";delete t.filter.q,r=Object(c.a)(Object(c.a)({},r),{},{match:a})}r=Object(c.a)(Object(c.a)({},r),t.filter)}else r={};if(t.pagination){var i=t.pagination,s=i.page,d=i.perPage,j=[(s-1)*d,s*d-1];r=Object(c.a)(Object(c.a)({},r),{},{range:j})}if(t.sort){var b=t.sort,m=b.field;"DESC"==b.order&&(m="-"+m),r=Object(c.a)(Object(c.a)({},r),{},{sortBy:m})}var f=l+n.join("/");return o(f,{method:"POST",body:JSON.stringify(r)}).then((function(e){var t=e.headers;return{data:e.json,total:parseInt(t.get("content-range").split("/").pop(),10)}}))},getOne:function(e,t){var r=e.split("/"),n={};if(r[1]&&"config"==r[0])r[0]="getconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));"item"==r[1]?r[0]="library/item":"resolve"==r[1]?(r[0]="library/item",n={resolve:1}):r[0]="library/get"}r.push(t.id);var a=l+r.join("/");return o(a,{method:"POST",body:JSON.stringify(n)}).then((function(e){e.headers;return{data:e.json[0]}}))},getMany:function(e,t){var r=e.split("/"),n={};if(r[1]&&"config"==r[0])r[0]="getconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));"item"==r[1]?r[0]="library/item":"resolve"==r[1]?(r[0]="library/item",n={resolve:1}):r[0]="library/get"}var a=t.ids.map((function(e){var t=l+r.join("/")+"/"+e;return o(t,{method:"POST",body:JSON.stringify(n)}).then((function(e){e.headers;return e.json[0]}))}));return Promise.all(a).then((function(e){return{data:e.results}}))},getManyReference:function(e,t){var r=Object(c.a)({},t.filter);r[t.target]=t.id;var n={pagination:t.pagination,sort:t.sort,filter:r};return u.getList(e,n)},update:function(e,t){var r=e.split("/");if(r[1]&&"config"==r[0])r[0]="setconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));r[0]="library/set"}delete t.data.id,r.push(t.id);var n=l+r.join("/");return o(n,{method:"POST",body:JSON.stringify(t.data)}).then((function(e){e.headers,e.json;return{data:Object(c.a)({id:t.id},t.data)}}))},updateMany:function(e,t){var r=e.split("/");if(r[1]&&"config"==r[0])r[0]="setconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));r[0]="library/set"}delete t.data.id;var n=t.ids.map((function(e){var n=l+r.join("/")+"/"+e;return o(n,{method:"POST",body:JSON.stringify(t.data)}).then((function(){return e}))}));return Promise.all(n).then((function(e){return{data:e.results}}))},create:function(e,t){var r=e.split("/");if(r[1]&&"config"==r[0]){r[0]="setconf",r.push(t.data.id);var n=t.data.id;delete t.data.id;var a=l+r.join("/");return o(a,{method:"POST",body:JSON.stringify(t.data)}).then((function(e){e.headers,e.json;return{data:Object(c.a)({id:n},t.data)}}))}if(r[1]&&"library"==r[0]){r[0]="library/set",delete t.data.id;var i=l+r.join("/");return o(i,{method:"POST",body:JSON.stringify(t.data)}).then((function(e){e.headers;var r=e.json;return{data:Object(c.a)({id:r.insertId},t.data)}}))}return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}))},delete:function(e,t){var r=e.split("/");if(r[1]&&"config"==r[0])r[0]="delconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));r[0]="library/deleteID"}r.push(t.id);var n=l+r.join("/");return o(n,{method:"POST",body:JSON.stringify(u.delParams)}).then((function(){return u.delParams={},{data:Object(c.a)({id:t.id},t.previousData)}}))},deleteMany:function(e,t){var r=e.split("/");if(r[1]&&"config"==r[0])r[0]="delconf";else{if(!r[1]||"library"!=r[0])return new Promise((function(e,t){t({status:400,message:"Bad Request: invalid API function"})}));r[0]="library/deleteID"}var n=t.ids.map((function(e){var t=l+r.join("/")+"/"+e;return o(t,{method:"POST",body:JSON.stringify(u.delParams)}).then((function(){return e}))}));return Promise.all(n).then((function(e){return u.delParams={},{data:e}}))},genPasswordHash:function(e,t){return o("/genpass",{method:"POST",body:JSON.stringify({password:t.password})}).then((function(e){var t=e.json;return{password:t.hash,salt:t.salt}}))},setLoc:function(e){u.locName=e},setDelParams:function(e){u.delParams=e}},d=u,j={cred:{},login:function(e){var t=e.username,r=e.password,n=new Request("auth",{method:"POST",body:JSON.stringify({username:t,password:r}),headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){return j.cred=e,Promise.resolve()}))},logout:function(){return fetch("/unauth").then((function(e){return j.cred={},Promise.resolve()})).catch((function(e){return j.cred={},Promise.resolve()}))},checkError:function(e){var t=e.status;return 401===t||403===t?(j.cred={},Promise.reject()):Promise.resolve()},checkAuth:function(){return j.cred.username?Promise.resolve():j.checkWho().then((function(){return Promise.resolve()})).catch((function(){return Promise.reject()}))},getPermissions:function(){return j.cred.permission?Promise.resolve(j.cred.permission):j.checkWho().then((function(){return Promise.resolve(j.cred.permission)})).catch((function(){return Promise.reject()}))},getIdentity:function(){return j.cred.username?Promise.resolve({fullName:j.cred.username}):j.checkWho().then((function(){return Promise.resolve({fullName:j.cred.username})})).catch((function(){return Promise.reject()}))},checkWho:function(){return fetch("who").then((function(e){return e.status<200||e.status>=300?(j.cred={},Promise.reject()):e.json()})).then((function(e){return j.cred=e,Promise.resolve()})).catch((function(){return j.cred={},Promise.reject()}))}},b=j,m=r(330),f=r(599),O=r(595),p=r(594),x=r(46),h=r(510),y=r(596),g=r(605),v=r(597),P=r(586),w=r(587),T=r(600),S=r(598),N=r(311),C=r(589),k=r(607),A=r(602),L=r(4),q=function(e){var t=e.record;return Object(L.jsxs)("span",{children:["User ",t?'"'.concat(t.id,'"'):"Create New"]})},I=function(e){var t=e.permissions,r=Object(x.a)(e,["permissions"]),n=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1},r),{},{children:n?Object(L.jsx)(g.a,{primaryText:function(e){return e.id},secondaryText:function(e){return"admin"===t?e.permission:null}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"id",label:"Username",sortable:!1}),"admin"===t&&Object(L.jsx)(P.a,{source:"permission",label:"Permission",sortable:!1}),"admin"===t&&Object(L.jsx)(w.a,{})]})}))},V=function(e){return Object(L.jsx)(T.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(q,{}),transform:function(e){return e.newpassword?d.genPasswordHash("",{password:e.newpassword}).then((function(t){return e.salt=t.salt,e.password=t.password,delete e.newpassword,e})):(delete e.password,delete e.salt,delete e.newpassword,e)}},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{disabled:!0,label:"Username",source:"id"}),Object(L.jsx)(C.a,{label:"Change Password to",source:"newpassword"}),Object(L.jsx)(k.a,{source:"permission",choices:[{id:"admin",name:"Administrator (All)"},{id:"manager",name:"Manager (Studio, Library, Traffic)"},{id:"production",name:"Production (Library, Traffic)"},{id:"programming",name:"Programming (Studio, Library)"},{id:"traffic",name:"Traffic"},{id:"library",name:"Library"},{id:"studio",name:"Studio"}]})]})}))},J=function(e){return Object(L.jsx)(A.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(q,{}),transform:function(e){return e.newpassword?d.genPasswordHash("",{password:e.newpassword}).then((function(t){return e.salt=t.salt,e.password=t.password,delete e.newpassword,e})):(delete e.password,delete e.salt,delete e.newpassword,e)}},e),{},{children:Object(L.jsxs)(S.a,{validate:function(e){var t={};return e.id||(t.id="Username is required"),e.newpassword||(t.newpassword="Password is required"),t},children:[Object(L.jsx)(N.a,{label:"Username",source:"id"}),Object(L.jsx)(C.a,{label:"Password",source:"newpassword"}),Object(L.jsx)(k.a,{source:"permission",initialValue:"manager",choices:[{id:"admin",name:"Administrator (All)"},{id:"manager",name:"Manager (Studio, Library, Traffic)"},{id:"production",name:"Production (Library, Traffic)"},{id:"programming",name:"Programming (Studio, Library)"},{id:"traffic",name:"Traffic"},{id:"library",name:"Library"},{id:"studio",name:"Studio"}]})]})}))},R=function(e){var t=e.record;return Object(L.jsxs)("span",{children:["File ",t?'"'.concat(t.id,'"'):"Create New"]})},M=function(e){var t=e.permissions,r=Object(x.a)(e,["permissions"]),n=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1},r),{},{children:n?Object(L.jsx)(g.a,{primaryText:function(e){return e.id},secondaryText:function(e){return"admin"===t?"${record.value}":null}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"id",label:"Property",sortable:!1}),"admin"===t&&Object(L.jsx)(P.a,{source:"value",label:"Value",sortable:!1}),"admin"===t&&Object(L.jsx)(w.a,{})]})}))},B=function(e){return Object(L.jsx)(T.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(R,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{disabled:!0,label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},D=function(e){return Object(L.jsx)(A.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(R,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},H=function(e){var t=e.record;return Object(L.jsxs)("span",{children:["Http ",t?'"'.concat(t.id,'"'):"Create New"]})},F=function(e){var t=e.permissions,r=Object(x.a)(e,["permissions"]),n=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1},r),{},{children:n?Object(L.jsx)(g.a,{primaryText:function(e){return e.id},secondaryText:function(e){return"admin"===t?"${record.value}":null}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"id",label:"Property",sortable:!1}),"admin"===t&&Object(L.jsx)(P.a,{source:"value",label:"Value",sortable:!1}),"admin"===t&&Object(L.jsx)(w.a,{})]})}))},U=function(e){return Object(L.jsx)(T.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(H,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{disabled:!0,label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},$=function(e){return Object(L.jsx)(A.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(H,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},E=function(e){var t=e.record;return Object(L.jsxs)("span",{children:["Library ",t?'"'.concat(t.id,'"'):"Create New"]})},W=function(e){var t=e.permissions,r=Object(x.a)(e,["permissions"]),n=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1},r),{},{children:n?Object(L.jsx)(g.a,{primaryText:function(e){return e.id},secondaryText:function(e){return"admin"===t?"${record.value}":null}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"id",label:"Property",sortable:!1}),"admin"===t&&Object(L.jsx)(P.a,{source:"value",label:"Value",sortable:!1}),"admin"===t&&Object(L.jsx)(w.a,{})]})}))},z=function(e){return Object(L.jsx)(T.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(E,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{disabled:!0,label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},G=function(e){return Object(L.jsx)(A.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(E,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{label:"Property",source:"id"}),Object(L.jsx)(N.a,{label:"Value",source:"value"})]})}))},K=r(590),Q=r(591),X=function(e){var t=e.record;return Object(L.jsxs)("span",{children:["Studio ",t?'"'.concat(t.id,'"'):"Create New"]})},Y=function(e){var t=e.permissions,r=Object(x.a)(e,["permissions"]),n=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1},r),{},{children:n?Object(L.jsx)(g.a,{primaryText:function(e){return e.id},secondaryText:function(e){return"admin"===t?"${record.host}:${record.port}":null}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"id",label:"Name",sortable:!1}),"admin"===t&&Object(L.jsx)(P.a,{source:"host",label:"Host Address",sortable:!1}),"admin"===t&&Object(L.jsx)(K.a,{source:"port",label:"Port Number",sortable:!1}),"admin"===t&&Object(L.jsx)(w.a,{})]})}))},Z=function(e){return Object(L.jsx)(T.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(X,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{disabled:!0,label:"Name",source:"id"}),Object(L.jsx)(N.a,{label:"Host Address",source:"host"}),Object(L.jsx)(Q.a,{label:"Port Number",source:"port"}),Object(L.jsx)(N.a,{label:"Run Command",source:"run"}),Object(L.jsx)(Q.a,{label:"Max. Connections",source:"maxpool"}),Object(L.jsx)(Q.a,{label:"Min. Connections",source:"minpool"})]})}))},_=function(e){return Object(L.jsx)(A.a,Object(c.a)(Object(c.a)({title:Object(L.jsx)(X,{})},e),{},{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(N.a,{label:"Name",source:"id"}),Object(L.jsx)(N.a,{label:"Host Address",source:"host",defaultValue:"localhost"}),Object(L.jsx)(Q.a,{label:"Port Number",source:"port",defaultValue:9550}),Object(L.jsx)(N.a,{label:"Run Command",source:"run"}),Object(L.jsx)(Q.a,{label:"Max. Connections",source:"maxpool",defaultValue:5}),Object(L.jsx)(Q.a,{label:"Min. Connections",source:"minpool",defaultValue:2})]})}))},ee=r(606),te=function(e){return Object(L.jsxs)(ee.a,Object(c.a)(Object(c.a)({},e),{},{children:[Object(L.jsx)(N.a,{label:"Match",source:"q",alwaysOn:!0}),Object(L.jsx)(k.a,{label:"Type",source:"type",alwaysOn:!0,initialValue:"artist",choices:[{id:"artist",name:"Artist"},{id:"album",name:"Album"},{id:"title",name:"Title"},{id:"category",name:"Category"},{id:"playlist",name:"Playlist"},{id:"task",name:"Task"},{id:"comment",name:"Comment"},{id:"missing",name:"Missing"},{id:"rested",name:"Rested"},{id:"added",name:"Added"}]}),Object(L.jsx)(N.a,{})]}))},re=function(e){e.permissions;var t=Object(x.a)(e,["permissions"]),r=Object(h.a)((function(e){return e.breakpoints.down("sm")}));return Object(L.jsx)(y.a,Object(c.a)(Object(c.a)({exporter:!1,filters:Object(L.jsx)(te,{})},t),{},{children:r?Object(L.jsx)(g.a,{primaryText:function(e){return e.Label},secondaryText:function(e){return e.Duration}}):Object(L.jsxs)(v.a,{rowClick:"edit",children:[Object(L.jsx)(P.a,{source:"Label",label:"Name"}),Object(L.jsx)(P.a,{source:"Duration",label:"Duration"})]})}))},ne=r(112),ae=r(126),ie=r(328),se=r.n(ie),ce=r(111),oe=r.n(ce),le=Object(ae.a)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}}),ue=function(e){var t=le();return Object(L.jsxs)(m.a,Object(c.a)(Object(c.a)({},e),{},{children:[Object(L.jsx)(ne.a,{variant:"h6",color:"inherit",className:t.title,id:"react-admin-title"}),"AudioRack4",Object(L.jsx)("span",{className:t.spacer})]}))},de=function(e){return Object(L.jsx)(f.a,Object(c.a)(Object(c.a)({},e),{},{appBar:ue}))},je=function(){return Object(L.jsx)(O.a,{layout:de,authProvider:b,dataProvider:d,disableTelemetry:!0,children:function(e){return["admin"===e?Object(L.jsx)(p.a,{name:"config/files",list:M,edit:"admin"===e?B:null,create:"admin"===e?D:null,options:{label:"file settings"},icon:oe.a}):null,"admin"===e?Object(L.jsx)(p.a,{name:"config/users",list:I,edit:"admin"===e?V:null,create:"admin"===e?J:null,options:{label:"user settings"},icon:oe.a}):null,"admin"===e?Object(L.jsx)(p.a,{name:"config/http",list:F,edit:"admin"===e?U:null,create:"admin"===e?$:null,options:{label:"http settings"},icon:oe.a}):null,"admin"===e?Object(L.jsx)(p.a,{name:"config/library",list:W,edit:"admin"===e?z:null,create:"admin"===e?G:null,options:{label:"library settings"},icon:oe.a}):null,"admin"===e?Object(L.jsx)(p.a,{name:"config/studios",list:Y,edit:"admin"===e?Z:null,create:"admin"===e?_:null,options:{label:"studio settings"},icon:oe.a}):null,Object(L.jsx)(p.a,{name:"library/browse",list:re,options:{label:"Library"},icon:se.a}),Object(L.jsx)(p.a,{name:"library/get/locations"})]}})},be=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,610)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),i(e),s(e)}))};s.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(je,{})}),document.getElementById("root")),be()}},[[508,1,2]]]);
//# sourceMappingURL=main.ac5177c1.chunk.js.map